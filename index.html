<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style/style.css" />
    <script src="./teste.json"></script>
    <title>Document</title>
  </head>
  <body>
    <header>
      <div class="elements1">
        <ul>
          <li><a href="#home"><p>Home</p></a></li>
          <li><a href="#about"><p>About</p></a></li>
          <li><a href="#blog"><p>Blog</p></a></li>
          <li><a href="#pages"><p>Pages</p></a></li>
          <li><a href="#contact"><p>Contact</p></a></li>
        </ul>
      </div>
      <div class="elements2">
        <select id="language" name="Idioma">
          <option value="English">English</option>
          <option value="Portuguese">Portuguese</option>
          <option value="Spanish">Spanish</option>
        </select>

        <a href="#sign-in"><p>Sign in</p></a>

        <a href="#register"><p>Register</p></a>
      </div>
    </header>

    <div class="main">
      <div class="left">
        <h1>Sign In to Recharge Direct</h1>
        <p>if you don’t have an account you can</p>
        <a href="#register-here"><span>Register here! </span></a>
      </div>

      <div class="center">
        <div class="img1"><img src="./assets/img homem.png" alt="Homem feliz" /></div>
      </div>

      <div class="right">
        <input type="email" id="email" placeholder="Enter Email" />
        <input type="password" id="password" placeholder="••••••••" />

        <div class="recover-password">
          <a href="#recover-password"><p>Recover password ?</p></a>
        </div>
        
        <div class="response">
          <p id="resultBody"></p>
        </div>

        <button id="submitButton">Sign</button>

        <div class="right-center">
          <div class="space-line"></div>
          <span> Or continue</span>
          <div class="space-line2"></div>
        </div>

        <div class="icons">
          <div class="icon1"><a href="#google"><img src="./assets/simb google.png" alt="icon google" /></a></div>
          <div class="icon2"><a href="#apple"><img src="./assets/simb apple.png" alt="icon apple" /></a></div>
          <div class="icon3"><a href="#facebook"><img src="./assets/simb face.png" alt="icon facebook" /></a></div>
        </div>
      </div>
    </div>
  </body>
  <script>
    const emailBody = document.getElementById("email");
    const passwordBody = document.getElementById("password");
    const submitButtonBody = document.getElementById("submitButton");
    var emailError = false
    var passwordError = false
    // const check = window.localStorage.getItem('token');
    //   if(check){
    //     window.location.assign("./Valorant/central.html")
    //   }


    submitButton.addEventListener("click", function () {
      fetch("./teste.json")
        .then((response) => response.json())
        .then((json) => {
          const completeFile = json;

          for (let i = 0; i < completeFile.length; i++) {

             if(completeFile[i].email === emailBody.value){
              emailError = true
             }

             if(completeFile[i].password === passwordBody.value){
              passwordError = true
            } 
          }
          if (emailError) {
            if (passwordError) {
              return  (document.getElementById("resultBody").style.color = "rgb(24, 120, 0 )",
                        document.getElementById("resultBody").innerHTML =
                        "Free access!",
                        window.localStorage.setItem('token', 'aaaaa'),
                        setTimeout(function(){
                          window.location.replace( "./Valorant/central.html") 
                        },1000)
                        )

            } else {
              return  (document.getElementById("resultBody").style.color = "rgb(187, 0, 0 )",
                        document.getElementById("resultBody").innerHTML =
                        "Wrong password!")

            }
          } else {
            return (document.getElementById("resultBody").style.color = "rgb(187, 0, 0 )",
                    document.getElementById("resultBody").innerHTML =
                    "Please enter a valid email address!");
        }
      });
    });
  </script>
</html>
